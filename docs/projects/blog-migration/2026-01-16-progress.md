# 2026-01-16 Progress: PandaCSS Styling Plan

## Summary

Analyzed the current styling situation and created a detailed plan for replacing Starlight's CSS with PandaCSS.

## Current State Analysis

### What Starlight Currently Provides

Starlight uses CSS custom properties organized into these categories:

| Category | Examples | PandaCSS Equivalent |
|----------|----------|---------------------|
| **Colors** | `--sl-color-gray-1` through `--sl-color-gray-7`, accent colors | Semantic tokens in `theme.semanticTokens` |
| **Typography** | `--sl-text-body`, `--sl-text-h1` through `--sl-text-h5`, font stacks | `theme.tokens.fontSizes`, `theme.textStyles` |
| **Spacing** | `--sl-content-pad-x`, `--sl-content-gap-y`, `--sl-nav-height` | `theme.tokens.spacing`, layout recipes |
| **Shadows** | Small, medium, large shadows for light/dark modes | `theme.tokens.shadows` |
| **Z-Index** | `--sl-z-index-navbar`, `--sl-z-index-menu` | `theme.tokens.zIndex` |

### What's Missing in Current Setup

1. **No generated CSS** - `styled-system/` is gitignored but also not being generated or imported
2. **No global styles** - `src/styles/` directory doesn't exist
3. **No layouts** - Using Starlight's built-in layouts
4. **No prose/typography styles** - Markdown content has no styling without Starlight

## Styling Implementation Plan

### Phase 3a: PandaCSS Foundation

**Goal:** Set up the PandaCSS token system and global styles

#### 1. Define Design Tokens (`panda.config.ts`)

```typescript
theme: {
  extend: {
    tokens: {
      colors: {
        // Base grayscale (maps to Starlight's gray-1 through gray-7)
        gray: {
          50: { value: '#fafafa' },
          100: { value: '#f4f4f5' },
          // ... etc
        },
        // Accent colors
        accent: {
          50: { value: '...' },
          // ... etc
        }
      },
      fontSizes: {
        '2xs': { value: '0.75rem' },
        xs: { value: '0.8125rem' },
        sm: { value: '0.875rem' },
        base: { value: '1rem' },
        lg: { value: '1.125rem' },
        xl: { value: '1.25rem' },
        '2xl': { value: '1.5rem' },
        '3xl': { value: '1.875rem' },
        '4xl': { value: '2.25rem' },
        '5xl': { value: '3rem' },
        '6xl': { value: '4rem' },
      },
      lineHeights: {
        normal: { value: '1.75' },
        headings: { value: '1.2' },
      },
      fonts: {
        sans: { value: 'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif' },
        mono: { value: 'ui-monospace, SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace' },
      },
      spacing: {
        navHeight: { value: '4rem' },
        sidebarWidth: { value: '18.75rem' },
        contentWidth: { value: '50rem' },
        contentPadX: { value: 'clamp(1rem, calc(3.5rem + (100vw - 75rem) / 2), 5rem)' },
        contentGapY: { value: '1.5rem' },
      },
    },
    semanticTokens: {
      colors: {
        // Light/dark mode aware tokens
        text: {
          DEFAULT: { value: { base: '{colors.gray.900}', _dark: '{colors.gray.100}' } },
          muted: { value: { base: '{colors.gray.600}', _dark: '{colors.gray.400}' } },
        },
        bg: {
          DEFAULT: { value: { base: 'white', _dark: '{colors.gray.950}' } },
          muted: { value: { base: '{colors.gray.50}', _dark: '{colors.gray.900}' } },
        },
        border: {
          DEFAULT: { value: { base: '{colors.gray.200}', _dark: '{colors.gray.800}' } },
        },
        // ... etc
      }
    }
  }
}
```

#### 2. Create Global Styles (`src/styles/global.css`)

```css
@layer reset, base, tokens, recipes, utilities;

/* Import PandaCSS generated styles */
@import '../styled-system/styles.css';

/* Global base styles */
@layer base {
  html {
    font-family: var(--fonts-sans);
    line-height: var(--line-heights-normal);
    color: var(--colors-text);
    background: var(--colors-bg);
  }

  /* ... */
}
```

#### 3. Create Prose/Typography Styles

This is critical for blog content. Options:

**Option A: PandaCSS Text Styles + Global Prose Class**
- Define text styles in panda config
- Create a `.prose` class that applies them to nested elements

**Option B: Use `@pandacss/preset-typography`** (if available)
- Similar to Tailwind Typography plugin

**Option C: Manual prose styles in global CSS**
- More control but more maintenance

**Recommendation:** Option A with a `prose` recipe

```typescript
// In panda.config.ts recipes
prose: {
  className: 'prose',
  base: {
    '& h1': { fontSize: '4xl', fontWeight: 'bold', lineHeight: 'headings', mt: '8', mb: '4' },
    '& h2': { fontSize: '2xl', fontWeight: 'semibold', lineHeight: 'headings', mt: '6', mb: '3' },
    '& h3': { fontSize: 'xl', fontWeight: 'semibold', lineHeight: 'headings', mt: '5', mb: '2' },
    '& p': { mb: '4', lineHeight: 'normal' },
    '& a': { color: 'accent.500', textDecoration: 'underline' },
    '& ul, & ol': { pl: '6', mb: '4' },
    '& li': { mb: '1' },
    '& pre': { p: '4', rounded: 'md', bg: 'bg.muted', overflow: 'auto', mb: '4' },
    '& code': { fontFamily: 'mono', fontSize: 'sm', bg: 'bg.muted', px: '1', rounded: 'sm' },
    '& blockquote': { pl: '4', borderLeft: '4px solid', borderColor: 'border', fontStyle: 'italic' },
    // ... etc
  }
}
```

### Phase 3b: Component Styling

After the foundation, style these components:

| Component | Priority | Notes |
|-----------|----------|-------|
| Navigation | High | Header with site title, nav links, dark mode toggle |
| Footer | Medium | Simple footer with links |
| BlogPost layout | High | Article wrapper with prose styles |
| Code blocks | High | Syntax highlighting (via Shiki/Expressive Code) |
| Blog index cards | Medium | Post previews with title, date, tags |
| Tag chips | Low | Clickable tag badges |

### File Structure

```
apps/djf.io/
├── panda.config.ts          # Token definitions, recipes
├── src/
│   ├── styles/
│   │   └── global.css       # Global styles, imports styled-system
│   ├── layouts/
│   │   ├── BaseLayout.astro # HTML structure, imports global.css
│   │   ├── BlogPost.astro   # Wraps content in prose styles
│   │   └── Page.astro       # Generic page layout
│   └── components/
│       ├── Navigation.astro
│       └── Footer.astro
└── styled-system/           # Generated (gitignored)
```

## Implementation Order

1. **Run `pnpm prepare`** to generate styled-system
2. **Create `src/styles/global.css`** that imports styled-system
3. **Update `panda.config.ts`** with design tokens
4. **Create `BaseLayout.astro`** that imports global.css
5. **Create prose recipe** for blog content
6. **Create `BlogPost.astro`** using prose recipe
7. **Style navigation and footer**
8. **Add dark mode support**

## Open Questions

1. **Color palette:** Use Park UI's preset colors or define custom?
   - Park UI is already in the preset, may want to lean into it

2. **Syntax highlighting:** Keep using Expressive Code (Astro's default) or switch?
   - Recommend keeping Expressive Code, it works well

3. **Dark mode toggle:** Where should it live?
   - Recommend in navigation, persisted to localStorage

## Next Steps

- [ ] Start with Phase 3a: PandaCSS foundation
- [ ] Run `pnpm prepare` to ensure styled-system generates
- [ ] Create minimal global.css and BaseLayout.astro
- [ ] Test with a simple page before migrating all content

## Blockers

- Need to complete Phase 1 (content schemas) and Phase 2 (layouts) in parallel
- Phases 1-3 can be worked on together as they're interconnected
