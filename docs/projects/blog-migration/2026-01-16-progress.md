# 2026-01-16 Progress: PandaCSS Styling Plan

## Summary

Analyzed the current styling situation and created a plan for replacing Starlight's CSS with PandaCSS **using presets** (no custom recipes).

## Current State Analysis

### What Starlight Currently Provides

Starlight uses CSS custom properties for colors, typography, spacing, shadows, and z-index.

### What's Missing in Current Setup

1. **No generated CSS** - `styled-system/` is gitignored but not being generated or imported
2. **No global styles** - `src/styles/` directory doesn't exist
3. **No layouts** - Using Starlight's built-in layouts
4. **No prose/typography styles** - Markdown content has no styling without Starlight

### Current PandaCSS Setup

Already have in `panda.config.ts`:
- `@pandacss/preset-base` - base tokens
- `@park-ui/panda-preset` - Park UI design system (uses Radix Colors, has dark mode)

## Styling Implementation Plan (Preset-Based)

### Presets to Use

| Preset | Purpose | Status |
|--------|---------|--------|
| `@pandacss/preset-base` | Base PandaCSS tokens | ✅ Installed |
| `@park-ui/panda-preset` | Design system tokens, component recipes | ✅ Installed |
| `pandacss-preset-typography` | Prose recipe for Markdown content | ❌ Need to install |

### Phase 3a: Install Typography Preset

```bash
pnpm add -D pandacss-preset-typography
```

Update `panda.config.ts`:

```typescript
import { defineConfig } from '@pandacss/dev'
import typographyPreset from 'pandacss-preset-typography'

export default defineConfig({
  preflight: true,
  presets: [
    '@pandacss/preset-base',
    '@park-ui/panda-preset',
    typographyPreset(),  // Adds prose recipe
  ],
  include: ['./src/**/*.{ts,tsx,js,jsx,astro}', './pages/**/*.{ts,tsx,js,jsx,astro}'],
  exclude: [],
  theme: {
    extend: {},
  },
  jsxFramework: 'react',
  outdir: 'styled-system',
})
```

### Phase 3b: Create Global Styles

Create `src/styles/global.css`:

```css
@layer reset, base, tokens, recipes, utilities;

/* Import PandaCSS generated styles */
@import '../../styled-system/styles.css';
```

### Phase 3c: Create Base Layout

Create `src/layouts/BaseLayout.astro` that imports `global.css`.

### Phase 3d: Apply Prose Styles to Blog Content

The typography preset provides a `prose` recipe. Use it in blog layouts:

```astro
---
import { prose } from '../../styled-system/recipes'
---
<article class={prose({ size: 'base' })}>
  <slot />
</article>
```

Available sizes: `sm`, `base`, `lg`, `xl`, `2xl`

### What the Presets Provide

**Park UI Preset:**
- Radix color scale (with automatic dark mode)
- Typography tokens (font sizes, weights, line heights)
- Spacing scale
- Border radii
- Shadows
- Component recipes (Button, Card, etc.)

**Typography Preset:**
- `prose` recipe with nested element styling
- Semantic color tokens for typography (body, heading, link, code, etc.)
- `not-prose` utility to exclude sections
- 5 size variants

### File Structure

```
apps/djf.io/
├── panda.config.ts          # Presets only, minimal customization
├── src/
│   ├── styles/
│   │   └── global.css       # Just imports styled-system/styles.css
│   ├── layouts/
│   │   ├── BaseLayout.astro # HTML structure, imports global.css
│   │   └── BlogPost.astro   # Wraps content with prose()
│   └── components/
│       ├── Navigation.astro # Use Park UI tokens
│       └── Footer.astro     # Use Park UI tokens
└── styled-system/           # Generated (gitignored)
```

## Implementation Order

1. **Install `pandacss-preset-typography`**
2. **Update `panda.config.ts`** to add typography preset
3. **Run `pnpm prepare`** to generate styled-system
4. **Create `src/styles/global.css`** that imports styled-system
5. **Create `BaseLayout.astro`** that imports global.css
6. **Create `BlogPost.astro`** that uses `prose()` recipe
7. **Style navigation and footer** using Park UI tokens/utilities

## Key Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Custom recipes | No | Use presets instead |
| Color system | Radix (via Park UI) | Already configured, has dark mode |
| Typography | `pandacss-preset-typography` | Provides prose recipe out of box |
| Syntax highlighting | Keep Expressive Code | Astro default, works well |

## Next Steps

- [ ] Install `pandacss-preset-typography`
- [ ] Update panda.config.ts
- [ ] Run `pnpm prepare`
- [ ] Create global.css and BaseLayout.astro
- [ ] Test prose styling with existing blog content

## Blockers

- Phases 1-3 can be worked on together as they're interconnected
